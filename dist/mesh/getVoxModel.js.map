{"version":3,"file":"getVoxModel.js","sourceRoot":"","sources":["../../src/mesh/getVoxModel.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,oBAAoB,CAAC;AACjD,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD,OAAO,EAAE,UAAU,EAAE,MAAM,cAAc,CAAC;AAE1C,MAAM,CAAC,MAAM,WAAW,GAAG,CACzB,KAAY,EACZ,IAAY,EACZ,GAAW,EAEX,UAGO,EAAE,EACT,EAAE;IACF,sCAAsC;IACtC,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC;IACtC,MAAM,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,QAAQ,CAAC;IAChC,MAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3B,IAAI,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;QACzB,OAAO,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;QAClC,MAAM,IAAI,KAAK,CAAC,wBAAwB,GAAG,IAAI,IAAI,EAAE,CAAC,CAAC;IACzD,CAAC;IAED,MAAM,GAAG,GAAG,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IAC/C,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IAEtB,8BAA8B;IAE9B,qCAAqC;IACrC,sBAAsB;IACtB,iDAAiD;IACjD,mDAAmD;IAEnD,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACjC,OAAO,GAAG,CAAC;IACX,MAAM;AACR,CAAC,CAAC","sourcesContent":["import type { Scene } from \"@babylonjs/core/scene\";\nimport { isUndefined } from \"@mjt-engine/object\";\nimport { voxDataToSps } from \"../voxel/voxDataToSps\";\nimport type { MeshOptions } from \"./updateMesh\";\nimport { updateMesh } from \"./updateMesh\";\n\nexport const getVoxModel = (\n  scene: Scene,\n  name: string,\n  src: string,\n\n  options: MeshOptions &\n    Partial<{\n      merged: boolean;\n    }> = {}\n) => {\n  // return getMesh(scene, name, () => {\n  const metadata = scene.metadata ?? {};\n  const { voxes = {} } = metadata;\n  const voxData = voxes[src];\n  if (isUndefined(voxData)) {\n    console.log({ scene, name, src });\n    throw new Error(`No voxData found for ${src} ${name}`);\n  }\n\n  const sps = voxDataToSps(scene, voxData, name);\n  const mesh = sps.mesh;\n\n  // sps.mesh.setEnabled(false);\n\n  // const { merged = true } = options;\n  // const mesh = merged\n  //   ? voxDataToMergedModel(scene, voxData, name)\n  //   : voxDataToComplexModel(scene, voxData, name);\n\n  updateMesh(scene, mesh, options);\n  return sps;\n  // });\n};\n"]}