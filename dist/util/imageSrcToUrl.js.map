{"version":3,"file":"imageSrcToUrl.js","sourceRoot":"","sources":["../../src/util/imageSrcToUrl.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAE3C,OAAO,EAAE,SAAS,EAAE,MAAM,UAAU,CAAC;AAErC,MAAM,CAAC,MAAM,aAAa,GAAG,KAAK,EAAE,GAAoB,EAAmB,EAAE;IAC3E,MAAM,EAAE,GAAG,SAAS,CAAC,eAAe,CAAC,CAAC;IACtC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;QAC5B,EAAE,EAAE,CAAC;QACL,OAAO,GAAG,CAAC;IACb,CAAC;IAED,iDAAiD;IACjD,+BAA+B;IAC/B,MAAM;IACN,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC7C,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;IACtB,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;IACxB,GAAG,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3C,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAC7C,EAAE,EAAE,CAAC;IACL,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import { Images } from \"@mjt-engine/image\";\nimport type { TextureImageSrc } from \"../texture/TextureImageSrc\";\nimport { stopwatch } from \"./Timers\";\n\nexport const imageSrcToUrl = async (src: TextureImageSrc): Promise<string> => {\n  const sw = stopwatch(\"imageSrcToUrl\");\n  if (typeof src === \"string\") {\n    sw();\n    return src;\n  }\n\n  // const flipped = await createImageBitmap(src, {\n  //   imageOrientation: \"flipY\",\n  // });\n  const cvs = document.createElement(\"canvas\");\n  cvs.width = src.width;\n  cvs.height = src.height;\n  cvs.getContext(\"2d\")!.drawImage(src, 0, 0);\n  const result = await Images.toSrcString(cvs);\n  sw();\n  return result;\n};\n"]}